!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Pagine=t():e.Pagine=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";var r=n(1);e.exports=r},function(e,t,n){"use strict";var r=n(2),o=n(3),i=n(4),s=n(6),u=function(){function e(e){this.router=new i("#"),this.tmplEngine=new s,this.markdown=r.default||r,this.fetch=o.default||o,this.markdownCache={},this.view=e.view||"#view",this.createRoutes(e.routes)}return e.prototype.createRoutes=function(e){var t=this,n=e.reduce(function(e,n){return e[n.path]=function(){this.setContent(n.layout,n.md)}.bind(t),e},{});this.router.on(n)},e.prototype.fetchMarkdownFile=function(e){return this.markdownCache[e]?Promise.resolve(this.markdownCache[e]):this.fetch(e).then(function(e){return e.text()})},e.prototype.setContent=function(e,t){var n=this;return new Promise(function(r,o){n.fetchMarkdownFile(t).then(function(o){n.markdownCache[t]=o;var i=n.compileMarkdown(o),s=n.tmplEngine.tmpl(e,{content:i});document.querySelector(n.view).innerHTML=s,r(s)}).catch(function(e){o(e)})})},e.prototype.compileMarkdown=function(e){return this.markdown(e)},e}();e.exports=u},function(e,t,n){"use strict";function r(e){return e.replace(RegExp("^"+(e.match(/^(\t| )+/)||"")[0],"gm"),"")}function o(e){return(e+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(e){function t(e){var t=s[e.replace(/\*/g,"_")[1]||""],n=h[h.length-1]==e;return t?t[1]?(h[n?"pop":"push"](e),t[0|n]):t[0]:e}function n(){for(var e="";h.length;)e+=t(h[h.length-1]);return e}var u,c,a,p,f,l=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^```(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:\!\[([^\]]*?)\]\(([^\)]+?)\))|(\[)|(\](?:\(([^\)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(\-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,3})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*])/gm,h=[],d="",v=0,m={};for(e=e.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(e,t,n){return m[t.toLowerCase()]=n,""}).replace(/^\n+|\n+$/g,"");a=l.exec(e);)c=e.substring(v,a.index),v=l.lastIndex,u=a[0],c.match(/[^\\](\\\\)*\\$/)||(a[3]||a[4]?u='<pre class="code '+(a[4]?"poetry":a[2].toLowerCase())+'">'+r(o(a[3]||a[4]).replace(/^\n+|\n+$/g,""))+"</pre>":a[6]?(f=a[6],f.match(/\./)&&(a[5]=a[5].replace(/^\d+/gm,"")),p=i(r(a[5].replace(/^\s*[>*+.-]/gm,""))),">"===f?f="blockquote":(f=f.match(/\./)?"ol":"ul",p=p.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),u="<"+f+">"+p+"</"+f+">"):a[8]?u='<img src="'+o(a[8])+'" alt="'+o(a[7])+'">':a[10]?(d=d.replace("<a>",'<a href="'+o(a[11]||m[c.toLowerCase()])+'">'),u=n()+"</a>"):a[9]?u="<a>":a[12]||a[14]?(f="h"+(a[14]?a[14].length:"="===a[13][0]?1:2),u="<"+f+">"+i(a[12]||a[15])+"</"+f+">"):a[16]?u="<code>"+o(a[16])+"</code>":(a[17]||a[1])&&(u=t(a[17]||"--"))),d+=c,d+=u;return(d+e.substring(v)+n()).trim()}Object.defineProperty(t,"__esModule",{value:!0});var s={"":["<em>","</em>"],_:["<strong>","</strong>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof fetch?fetch.bind():function(e,t){return t=t||{},new Promise(function(n,r){function o(){var e,t=[],n=[],r={};return i.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(o,i,s){t.push(i=i.toLowerCase()),n.push([i,s]),e=r[i],r[i]=e?e+","+s:s}),{ok:1==(i.status/200|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:o,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return n},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}}var i=new XMLHttpRequest;i.open(t.method||"get",e);for(var s in t.headers)i.setRequestHeader(s,t.headers[s]);i.withCredentials="include"==t.credentials,i.onload=function(){n(o())},i.onerror=r,i.send(t.body)})};t.default=r},function(e,t,n){"use strict";var r=n(5),o=function(){function e(e){this.routes={},this.__default_routes__={"/404":function(){}},this.hash=e||"#",this.bindEvents()}return e.prototype.bindEvents=function(){window.addEventListener("hashchange",this.resolve.bind(this)),window.addEventListener("load",this.resolve.bind(this))},e.prototype.on=function(e){this.routes=r.extend({},this.routes,e)},e.prototype.resolve=function(){var e=location.hash.slice(1)||"/",t=this.routes[e];t?t():(this.__default_routes__["/404"](),history.replaceState(void 0,void 0,this.hash+"/404"))},e}();e.exports=o},function(e,t,n){"use strict";var r=function(){return"function"==typeof Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e);1<arguments.length;1){var n=arguments[1];if(void 0!==n&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}}();e.exports={extend:r}},function(e,t,n){"use strict";var r=function(){function e(){this.cache={}}return e.prototype.tmpl=function(e,t){var n=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):this.cache[e]=this.cache[e]||this.tmpl(document.getElementById(e).innerHTML);return t?n(t):n},e}();e.exports=r}])});